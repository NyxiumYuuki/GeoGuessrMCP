{
    "name": "GeoGuessr MCP Server Dev",
    "dockerComposeFile": "docker-compose.dev.yml",
    "service": "dev",
    "workspaceFolder": "/workspace",

    // Features to install
    "features": {
        "ghcr.io/devcontainers/features/git:1": {},
        "ghcr.io/devcontainers/features/github-cli:1": {}
    },

    // Configure tool-specific properties
    "customizations": {
        // VS Code settings (also works for some PyCharm features)
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-python.vscode-pylance",
                "ms-python.black-formatter",
                "charliermarsh.ruff",
                "tamasfe.even-better-toml",
                "redhat.vscode-yaml"
            ],
            "settings": {
                "python.defaultInterpreterPath": "/usr/local/bin/python",
                "python.formatting.provider": "black",
                "python.linting.enabled": true,
                "python.linting.ruffEnabled": true
            }
        }
    },

    // Ports to forward
    "forwardPorts": [8000],

    // Environment variables
    "containerEnv": {
        "PYTHONDONTWRITEBYTECODE": "1",
        "PYTHONUNBUFFERED": "1"
    },

    // Run commands after container is created
    "postCreateCommand": "pip install -e '.[dev]' && pre-commit install || true",

    // Run commands when container starts
    "postStartCommand": "echo 'Dev container ready! Run: python src/server.py'",

    // Mount the .env file if it exists
    "mounts": [
        "source=${localWorkspaceFolder}/.env,target=/workspace/.env,type=bind,consistency=cached"
    ],

    // User configuration
    "remoteUser": "vscode"
}